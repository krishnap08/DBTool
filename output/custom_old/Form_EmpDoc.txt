<!-- Form EmpDoc starts -->  
  <!-- Script Inclusion Block Starts -->
    <script name="PersonalCombo" />
  <!-- Script Inclusion Block Ends -->
<event name="onClick" ctl="PrintRpt" where="Client">
  <script name="Db" />
  <native lang="Javascript">
    <![CDATA[
      var v_sURL = "";
      var v_sPopUpPrm = "";
      var v_sItr;
      var v_sCtl;
      v_sPopUpPrm = "toobar=no,location=no,directories=no,status=yes,scrollbars=yes,resizable=yes,copyhistory=no,width=700,height=500";
      v_sURL = "[S_ReportUrl]?";
      v_sURL += "appname=[S_DbName]&";
      v_sURL += "apppathuri=[S_PathRootURI]&";
      v_sURL += "profile=[Profile]&";
      v_sURL += "user=[S_DbUser]&";
      v_sURL += "password=[S_DbPswd]&";
      v_sURL += "secemp=[S_SecEmp]&";
      v_sURL += "rpt=Test1&";
      v_sURL += "server=[Db]&";
      v_sURL += "prefix=[S_Prefix]&"; 
      v_sURL += "mss=yes&"; 
      v_sURL += "prm_@Emp=" + ctlGetVal("N_Emp_main_1") + "&";
      v_sURL += "prm_@prm_sAppMode=" + ctlGetVal("F_Application") + "&";
      v_sURL += "prm_@prm_sSecEmp=[S_SecEmp]&";
      v_sURL += "showprm=no";
     navigateWindow("NuWindowPopup", v_sURL, v_sPopUpPrm);
    ]]>
  </native>
</event>
  <!-- Event handling block starts -->
    <!-- Client side event handling block starts -->
      <event name="BeforeSave" where="Client" >
        <native lang="JavaScript">
          <![CDATA[ 
            var v_sEmpDoc;
            v_sEmpDoc = ctlGetVal("N_EmpDoc_main_1");
            v_Return = false;
            if ( v_sEmpDoc.indexOf(" ") != -1) {
              msg("SpcNotAllowed", "msgtext=]]><set var="[N_PrmMsg]">SpcNotAllowed</set><lookup dataset="GetMsg" /><![CDATA[");
              v_Return = false;
            } else {
              v_Return = true;
            }
          ]]>
        </native>
      </event>
    <!-- Client side event handling block ends -->
    <!-- Server side event handling block starts -->
      <event name="AfterDelete" where="Server">
        <file action="Delete">
          <path>[path_Doc]</path>
          <filename>EmpDoc_[F_Id_main_1]_[N_SysFilNam_main_1]</filename>
        </file>
      </event>
    <!-- Server side event handling block ends -->
  <!-- Event handling block ends -->
  <!-- Dataset definition block starts -->
    <dataset name="main">
      <tables>
        <tbl name="Emp" />
        <tbl name="EmpDoc" join="LEFT" to="Emp" main="Yes">
          <eq>
            <fld name="Emp.Emp" />
            <fld name="EmpDoc.Emp" />
          </eq>
        </tbl>
      </tables>
      <display>
        <fld name="EmpDoc.*" />
        <script name="EmpHeaderFlds" />
      </display>
      <order>
        <fld name="EmpDoc.EmpDoc" />
      </order>
    </dataset>

    <dataset name="GetMsg">
      <tables>
        <tbl name="Msg" />
      </tables>
      <display>
        <fld name="Msg.Message" />
        <fld name="Profile" >
          <if>
            <when>
              <eq>
                <fld name="Msg.Pfl" />
                <val>[Profile]</val>
              </eq>
            </when>
            <then>
              <val>0</val>
            </then>
            <else>
              <if>
                <when>
                  <eq>
                    <fld name="Msg.Pfl" />
                    <val>Df</val>
                  </eq>
                </when>
                <then>
                  <val>1</val>
                </then>
              </if>
            </else>
          </if>
        </fld>
      </display>
      <where>
        <and>
          <eq>
            <fld name="Msg.Msg" />
            <val>[N_PrmMsg]</val>
          </eq>
          <or>
            <eq>
              <fld name="Msg.Pfl" />
              <val>[Profile]</val>
            </eq>
            <eq>
              <fld name="Msg.Pfl" />
              <val>Df</val>
            </eq>
          </or>
        </and>
      </where>
      <order>
        <fld name="Profile" />
      </order>
    </dataset>
  <!-- Dataset definition block ends -->

  <!-- View definition block starts -->
    <view name="list">
      <script name="EmpHeaderCtls" />
      <display>
        <title>Employee Documents</title>
        <instructions>Employee Documents Information</instructions>
        <head />
        <toolbar>
          <add />
        </toolbar>
        <body>
          <datasheet dataset="main" headers="TOP">
            <script name="EmpHeaderGrp" />
            <row>
              <col>[ctl_EmpDoc]</col>
              <col>[ctl_EmpDocName]</col>
              <col>[ctl_UploadDt]</col>
            </row>
          </datasheet>
        </body>
      </display>
    </view>

    <view name="edit">
      <script name="EmpHeaderCtls" />
      <display>
        <title>Employee Documents</title>
        <instructions>Employee Documents Information</instructions>
        <head />
        <toolbar>
          <find/>
          <add />
          <save />
          <delete />
        </toolbar>
        <body>
          <datasheet dataset="main" headers="LEFT">
            <script name="EmpHeaderGrp" />
            <row><col>[ctl_EmpDoc]</col></row>
            <row><col>[ctl_EmpDocName]</col></row>
            <row><col>[ctl_EmpDocDesc]</col></row>
            <row><col>[ctl_UploadDt]</col></row>
            <row><col>[ctl_DocTyp]</col></row>
            <row><col>[ctl_Link][ctl_SysFilNam]</col></row>
            <row><col>[ctl_PrintRpt]</col></row>
          </datasheet>
        </body>
      </display>
    </view>
  <!-- View definition block ends -->
<!-- Form EmpDoc ends -->